<div *ngIf="user" class="form-container">

  <mat-card class="account-info-container">
    <mat-form-field [hideRequiredMarker]="true" [floatLabel]="'always'">
      <input matInput [(ngModel)]="user.id" placeholder="Login" required>
    </mat-form-field>

    <mat-form-field [hideRequiredMarker]="true" [floatLabel]="'always'">
      <input matInput [(ngModel)]="user.name.full" placeholder="Nazwa użytkownika" required>
    </mat-form-field>

    <mat-form-field [hideRequiredMarker]="true" [floatLabel]="'always'">
      <input matInput [(ngModel)]="user.department" placeholder="Wydział">
    </mat-form-field>

    <mat-form-field [hideRequiredMarker]="true" [floatLabel]="'always'">
      <input matInput [(ngModel)]="user.email" placeholder="Email" required>
    </mat-form-field>

    <mat-form-field [hideRequiredMarker]="true" [floatLabel]="'always'">
      <input matInput [(ngModel)]="user.password.id" placeholder="Hasło" required>
    </mat-form-field>

    <mat-checkbox [(ngModel)]="user.active">Aktywny</mat-checkbox>
    <mat-checkbox [(ngModel)]="user.administrator">Administrator</mat-checkbox>
    <mat-checkbox [(ngModel)]="user.password.id">Hasło nigdy nie wygasa</mat-checkbox>
    <mat-checkbox [(ngModel)]="user.password.name">Użytkownik może zmienić hasło</mat-checkbox>
    <mat-checkbox [(ngModel)]="user.password.value">Użytkownik musi zmienić hasło przy następnym logowaniu</mat-checkbox>
    <mat-checkbox [(ngModel)]="user.password.hm" [disabled]="true">Konto zablokowane</mat-checkbox>

    <div class="filler"></div>
    <div class="user-history">
      <div>Udane logowanie: {{ user.lastLogon.successful }}</div>
      <div>Nieudane logowanie: {{ user.lastLogon.failed }}</div>
      <div>Utworzony: {{ user.history.created }}</div>
      <div>Data ostatniej modyfikacji: {{ user.history.modified }}</div>
    </div>
  </mat-card>

  <div class="qualifications-container">
    <mat-card class="groups-container">
      <mat-card-header>
        <mat-card-title>Grupy</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <mat-form-field>

          <mat-chip-list #chipList>
            <mat-chip *ngFor="let group of user.group" [selectable]="true"
              [removable]="true" (removed)="onRemoveGroup(group)">
              {{ group.name }}</mat-chip>
<!--            <mat-icon matChipRemove></mat-icon> z jakiegoś powodu nie działa-->
            <input [formControl]="groupControl" [matChipInputFor]="chipList" > <!-- [matAutocomplete]="auto" -->
          </mat-chip-list>

          <mat-autocomplete *ngIf="filteredGroups" #auto="matAutocomplete" (optionSelected)="onGroupOptionSelected($event)">
            <mat-option *ngFor="let group of filteredGroups | async" [value]="group.id">
              {{ group.name }}
            </mat-option>
          </mat-autocomplete>

        </mat-form-field>
      </mat-card-content>
    </mat-card>

    <mat-card class="applications-container">
      <mat-card-header>
        <mat-card-title>Aplikacje</mat-card-title>
      </mat-card-header>
    </mat-card>
  </div>

</div>
